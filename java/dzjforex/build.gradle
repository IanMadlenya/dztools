buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'net.saliman:gradle-cobertura-plugin:2.4.0'
        classpath "org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.7.1"
    }
}

plugins {
    id 'net.saliman.cobertura' version '2.4.0'
    id 'com.github.kt3k.coveralls' version '2.7.1'
}
cobertura.coverageFormats = ['html', 'xml']

apply plugin: 'java'
apply plugin: 'maven-publish'
apply plugin: 'com.github.kt3k.coveralls'
apply plugin: 'jacoco'

group= 'com.jforex.dzplugin'
version = '0.9.5'
sourceCompatibility = 1.8
targetCompatibility = 1.8


description ="""
The Java plugin part for Zorro which lets you trade with Dukascopy
Project name: ${project.name}
"""

repositories {
   mavenCentral()
   maven {
       url "https://www.dukascopy.com/client/jforexlib/publicrepo"
   }
}

dependencies {
   compile files('libs/JForex-3-SDK-3.0.18.jar')
   compile files("${System.env.JAVA_HOME}/jre/lib/javaws.jar")
}

gradle.projectsEvaluated {
   tasks.withType(JavaCompile) {
        options.compilerArgs << "-Xlint:unchecked" << "-Xlint:deprecation"
    }
}

jacocoTestReport {
    reports {
        xml.enabled = true
        html.enabled = true
    }
}

check.dependsOn jacocoTestReport

tasks.coveralls {
    dependsOn 'check'
}
